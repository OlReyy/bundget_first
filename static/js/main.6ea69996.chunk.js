(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{27:function(e,t,a){e.exports=a(40)},40:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(19),c=a.n(l),u=a(6),i=a(48),o=a(49),m=a(25),d=a(47),s=a(43),f=new Intl.NumberFormat(void 0,{currency:"rub",style:"currency",minimumFractionDigits:0});function E(e,t){var a=e/t;return a<.5?"primary":a<.75?"warning":"danger"}var p=function(e){var t=e.name,a=e.amount,n=e.max,l=e.gray,c=e.onAddExpenseClick,u=e.hideButtons,m=e.onViewExpensesClick,p=[];return a>n?p.push("bg-danger","bg-opacity-10"):l&&p.push("bg-light"),r.a.createElement(d.a,{className:p.join(" ")},r.a.createElement(d.a.Body,null,r.a.createElement(d.a.Title,{className:"d-flex justify-content-between align-items-baseline fw-normal mb-3"},r.a.createElement("div",{className:"me-2"},t),r.a.createElement("div",{className:"d-flex align-items-baseline"},f.format(a)," ",n&&r.a.createElement("span",{className:"text-muted fs-6 ms-1"},"/",f.format(n)))),n&&r.a.createElement(s.a,{className:"rounded-pill",variant:E(a,n),min:0,max:n,now:a}),!u&&r.a.createElement(i.a,{direction:"horizontal",gap:2,className:"mt-4"},r.a.createElement(o.a,{variant:"outline-primary",className:"ms-auto",onClick:c},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),r.a.createElement(o.a,{onClick:m,variant:"outline-secondary"},"\u0423\u0432\u0438\u0434\u0435\u0442\u044c \u0440\u0430\u0441\u0445\u043e\u0434\u044b"))))},b=a(44),g=a(45),v=a(2),x=a(12),y=a(46);var j=function(e,t){var a=Object(n.useState)(function(){var a=localStorage.getItem(e);return null!=a?JSON.parse(a):"function"===typeof t?t():t}),r=Object(u.a)(a,2),l=r[0],c=r[1];return Object(n.useEffect)(function(){localStorage.setItem(e,JSON.stringify(l))},[e,l]),[l,c]},O=r.a.createContext();function h(){return Object(n.useContext)(O)}var C="\u041d\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u043e",N=function(e){var t=e.children,a=j("budgets",[]),n=Object(u.a)(a,2),l=n[0],c=n[1],i=j("expenses",[]),o=Object(u.a)(i,2),m=o[0],d=o[1];return r.a.createElement(O.Provider,{value:{budgets:l,expenses:m,getBudgetExpenses:function(e){return m.filter(function(t){return t.budgetId===e})},addExpense:function(e){var t=e.description,a=e.amount,n=e.budgetId;d(function(e){return[].concat(Object(x.a)(e),[{id:Object(y.a)(),description:t,amount:a,budgetId:n}])})},addBudget:function(e){var t=e.name,a=e.max;c(function(e){return e.find(function(e){return e.name===t})?e:[].concat(Object(x.a)(e),[{id:Object(y.a)(),name:t,max:a}])})},deleteBudget:function(e){var t=e.id;c(function(e){return e.filter(function(e){return e.id!==t})})},deleteExpense:function(e){var t=e.id;d(function(e){return e.map(function(e){return e.budgetId!==t?e:Object(v.a)({},e,{budgetId:C})})}),d(function(e){return e.filter(function(e){return e.id!==t})})}}},t)};var w=function(e){var t=e.show,a=e.handleClose,l=Object(n.useRef)(),c=Object(n.useRef)(),u=h().addBudget;return r.a.createElement(b.a,{show:t,onHide:a},r.a.createElement(g.a,{onSubmit:function(e){e.preventDefault(),u({name:l.current.value,max:parseFloat(c.current.value)}),a()}},r.a.createElement(b.a.Header,{closeButton:!0},r.a.createElement(b.a.Title,null,"\u041d\u043e\u0432\u044b\u0439 \u0440\u0430\u0437\u0434\u0435\u043b")),r.a.createElement(b.a.Body,null,r.a.createElement(g.a.Group,{className:"mb-3",controlId:"name"},r.a.createElement(g.a.Label,null,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),r.a.createElement(g.a.Control,{ref:l,type:"text",required:!0})),r.a.createElement(g.a.Group,{className:"mb-3",controlId:"max"},r.a.createElement(g.a.Label,null,"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0435 \u0437\u0430\u0442\u0440\u0430\u0442\u044b"),r.a.createElement(g.a.Control,{ref:c,type:"number",required:!0,min:0,step:.01})),r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement(o.a,{variant:"primary",type:"submit"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")))))};var I=function(e){var t=e.show,a=e.handleClose,l=e.defaultBudgetId,c=Object(n.useRef)(),u=Object(n.useRef)(),i=Object(n.useRef)(),m=h(),d=m.addExpense,s=m.budgets;return r.a.createElement(b.a,{show:t,onHide:a},r.a.createElement(g.a,{onSubmit:function(e){e.preventDefault(),d({description:c.current.value,amount:parseFloat(u.current.value),budgetId:i.current.value}),a()}},r.a.createElement(b.a.Header,{closeButton:!0},r.a.createElement(b.a.Title,null,"\u0420\u0430\u0441\u0445\u043e\u0434\u044b")),r.a.createElement(b.a.Body,null,r.a.createElement(g.a.Group,{className:"mb-3",controlId:"description"},r.a.createElement(g.a.Label,null,"\u0422\u043e\u0432\u0430\u0440"),r.a.createElement(g.a.Control,{ref:c,type:"text",required:!0})),r.a.createElement(g.a.Group,{className:"mb-3",controlId:"amount"},r.a.createElement(g.a.Label,null,"\u0426\u0435\u043d\u0430"),r.a.createElement(g.a.Control,{ref:u,type:"number",required:!0,min:0,step:.01})),r.a.createElement(g.a.Group,{className:"mb-3",controlId:"budgetId"},r.a.createElement(g.a.Label,null,"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"),r.a.createElement(g.a.Select,{defaultValue:l,ref:i},r.a.createElement("option",{id:C},"\u041d\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u043e"),s.map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))),r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement(o.a,{variant:"primary",type:"submit"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")))))};var B=function(e){var t=(0,h().getBudgetExpenses)(C).reduce(function(e,t){return e+t.amount},0);return 0===t?null:r.a.createElement(p,Object.assign({name:"\u041d\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u043e",amount:t,gray:!0},e))};var k=function(){var e=h(),t=e.expenses,a=e.budgets,n=t.reduce(function(e,t){return e+t.amount},0),l=a.reduce(function(e,t){return e+t.max},0);return 0===l?null:r.a.createElement(p,{name:"\u0418\u0442\u043e\u0433\u043e",amount:n,gray:!0,max:l,hideButtons:!0})};var S=function(e){var t=e.budgetId,a=e.handleClose,n=h(),l=n.getBudgetExpenses,c=n.budgets,u=n.deleteBudget,m=n.deleteExpense,d=l(t),s=C===t?{name:"\u041d\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u043e",id:C}:c.find(function(e){return e.id===t});return r.a.createElement(b.a,{show:null!=t,onHide:a},r.a.createElement(b.a.Header,{closeButton:!0},r.a.createElement(i.a,{direction:"horizontal",gap:2},r.a.createElement("div",null,"\u0417\u0430\u0442\u0440\u0430\u0442\u044b"),t!==C&&r.a.createElement(o.a,{onClick:function(){u(s),a()},variant:"outline-danger"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"))),r.a.createElement(b.a.Body,null,r.a.createElement(i.a,{direction:"vertical",gap:3},d.map(function(e){return r.a.createElement(i.a,{direction:"horizontal",gap:2,key:e.id},r.a.createElement("div",{className:"me-auto fs-4"},e.description),r.a.createElement("div",{className:"fs-5"},f.format(e.amount)),r.a.createElement(o.a,{size:"sm",variant:"outline-danger",onClick:function(){return m(e)}},"\xd7"))}))))};var H=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),d=Object(u.a)(c,2),s=d[0],f=d[1],E=Object(n.useState)(),b=Object(u.a)(E,2),g=b[0],v=b[1],x=Object(n.useState)(),y=Object(u.a)(x,2),j=y[0],O=y[1],N=h(),H=N.budgets,R=N.getBudgetExpenses;function z(e){f(!0),O(e)}return r.a.createElement("div",null,r.a.createElement(m.a,{className:"my-4"},r.a.createElement(i.a,{direction:"horizontal",gap:2,className:"mt-4"},r.a.createElement("h1",{className:"me-auto"},"\u0411\u044e\u0434\u0436\u0435\u0442"),r.a.createElement(o.a,{variant:"primary",onClick:function(){return l(!0)}},"\u0420\u0430\u0437\u0434\u0435\u043b"),r.a.createElement(o.a,{variant:"outline-primary",onClick:z},"\u0417\u0430\u0442\u0440\u0430\u0442\u044b")),r.a.createElement("div",{style:{display:"grid",gridTemplateColumn:"repeat(auto-fill, minmax(300px, 1fr))",gap:"1rem",alignItems:"flex-start"}},H.map(function(e){var t=R(e.id).reduce(function(e,t){return e+t.amount},0);return r.a.createElement(p,{key:e.id,name:e.name,amount:t,max:e.max,onAddExpenseClick:function(){return z(e.id)},onViewExpensesClick:function(){return v(e.id)}})}),r.a.createElement(B,{onAddExpenseClick:z,onViewExpensesClick:function(){return v(C)}}),r.a.createElement(k,null))),r.a.createElement(w,{show:a,handleClose:function(){return l(!1)}}),r.a.createElement(I,{show:s,defaultBudgetId:j,handleClose:function(){return f(!1)}}),r.a.createElement(S,{budgetId:g,handleClose:function(){return v()}}))};a(38);c.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(N,null,r.a.createElement(H,null))))}},[[27,2,1]]]);
//# sourceMappingURL=main.6ea69996.chunk.js.map